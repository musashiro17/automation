<!DOCTYPE html>
<html>
<body>
<h2>Stage 2 User Submission</h2>
<form id="stage2Form">
  <label for="proposedAlias">Proposed Alias:</label><br>
  <input type="text" id="proposedAlias" name="proposedAlias" required><br><br>

  <label for="managerEmail">Manager Email:</label><br>
  <input type="email" id="managerEmail" name="managerEmail" required><br><br>

  <label for="department">Department:</label><br>
  <input type="text" id="department" name="department" required><br><br>

  <label for="location">Location:</label><br>
  <input type="text" id="location" name="location" required><br><br>

  <!-- hidden fields for CSRF and honeypot -->
  <input type="hidden" id="csrf" name="csrf">
  <input type="hidden" id="hp" name="hp">

  <input type="submit" value="Submit Stage 2">
</form>

<script>
<script>
const params = new URLSearchParams(window.location.search);
const raw = params.get("data");
if (raw) {
  const data = JSON.parse(decodeURIComponent(raw));
  document.getElementById("upn").value = data.upn || "";
  document.getElementById("samAccountName").value = data.samAccountName || "";
  document.getElementById("department").value = data.department || "";
  document.getElementById("location").value = data.location || "";
  document.getElementById("managerEmail").value = data.managerEmail || "";
}
</script>
</body>
</html>

